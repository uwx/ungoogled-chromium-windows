name: Build

on:
  workflow_call:
    inputs:
      x86:
        required: false
        default: false
        type: boolean
    outputs:
      finished:
        value: ${{ jobs.build-12.outputs.finished }}

jobs:
  build-1: { name: 'step 1', uses: './.github/workflows/step.yml', with: { num: 1, finished: false, first: true, x86: '${{ inputs.x86 }}' } }
  build-2: { name: 'step 2', needs: build-1, uses: './.github/workflows/step.yml', with: { num: 2, finished: "${{ join(needs.*.outputs.finished) == 'true' }}", x86: '${{ inputs.x86 }}' } }
  build-3: { name: 'step 3', needs: build-2, uses: './.github/workflows/step.yml', with: { num: 3, finished: "${{ join(needs.*.outputs.finished) == 'true' }}", x86: '${{ inputs.x86 }}' } }
  build-4: { name: 'step 4', needs: build-3, uses: './.github/workflows/step.yml', with: { num: 4, finished: "${{ join(needs.*.outputs.finished) == 'true' }}", x86: '${{ inputs.x86 }}' } }
  build-5: { name: 'step 5', needs: build-4, uses: './.github/workflows/step.yml', with: { num: 5, finished: "${{ join(needs.*.outputs.finished) == 'true' }}", x86: '${{ inputs.x86 }}' } }
  build-6: { name: 'step 6', needs: build-5, uses: './.github/workflows/step.yml', with: { num: 6, finished: "${{ join(needs.*.outputs.finished) == 'true' }}", x86: '${{ inputs.x86 }}' } }
  build-7: { name: 'step 7', needs: build-6, uses: './.github/workflows/step.yml', with: { num: 7, finished: "${{ join(needs.*.outputs.finished) == 'true' }}", x86: '${{ inputs.x86 }}' } }
  build-8: { name: 'step 8', needs: build-7, uses: './.github/workflows/step.yml', with: { num: 8, finished: "${{ join(needs.*.outputs.finished) == 'true' }}", x86: '${{ inputs.x86 }}' } }
  build-9: { name: 'step 9', needs: build-8, uses: './.github/workflows/step.yml', with: { num: 9, finished: "${{ join(needs.*.outputs.finished) == 'true' }}", x86: '${{ inputs.x86 }}' } }
  build-10: { name: 'step 10', needs: build-9, uses: './.github/workflows/step.yml', with: { num: 10, finished: "${{ join(needs.*.outputs.finished) == 'true' }}", x86: '${{ inputs.x86 }}' } }
  build-11: { name: 'step 11', needs: build-10, uses: './.github/workflows/step.yml', with: { num: 11, finished: "${{ join(needs.*.outputs.finished) == 'true' }}", x86: '${{ inputs.x86 }}' } }
  build-12: { name: 'step 12', needs: build-11, uses: './.github/workflows/step.yml', with: { num: 12, finished: "${{ join(needs.*.outputs.finished) == 'true' }}", x86: '${{ inputs.x86 }}' } }